# Система автоматического построения грамматики и AST для языка 1С

## Описание проекта

Данный проект представляет собой систему для автоматического построения и расширения грамматики языка 1С:Предприятие с помощью Python и библиотеки Lark, а также формирования AST-дерева для последующего извлечения бизнес-логики приложения.

## Основные возможности

- Создание базовой грамматики языка 1С
- Автоматическое обнаружение и обработка новых конструкций с использованием AI-агентов
- Построение AST-дерева на основе грамматики
- Устойчивость к ошибкам с механизмами тестирования и отката
- Подробное логирование для анализа и отладки

## Структура проекта

```
.
├── ast_create/              # Основной пакет
│   ├── grammar/             # Файлы грамматики и парсера
│   ├── ast/                 # Классы AST и трансформации
│   ├── agents/              # AI-агенты для обработки конструкций
│   ├── utils/               # Вспомогательные утилиты
│   └── tests/               # Модульные и интеграционные тесты
├── docs/                    # Документация проекта
├── examples/                # Примеры кода на 1С для тестирования
├── scripts/                 # Скрипты для запуска и отладки
├── requirements.txt         # Зависимости проекта
├── setup.py                 # Файл установки
├── README.md                # Документация проекта
└── checkpoints.md           # Контрольные точки реализации
```

## Текущий статус проекта

Проект находится на начальной стадии разработки. Реализовано:

1. Базовая инфраструктура проекта с модульной структурой
2. Система конфигурации с поддержкой YAML/JSON и переменных окружения
3. Базовая грамматика Lark для языка 1С с поддержкой основных конструкций:
   - Объявление переменных
   - Определение функций и процедур
   - Условные операторы
   - Циклы
   - Обработка исключений
4. Класс парсера для работы с грамматикой
5. Модульные тесты для проверки парсера и грамматики
6. Утилиты для работы с файлами и логированием

## Следующие шаги

1. Реализация трансформации Lark-дерева в AST
2. Расширение грамматики для поддержки более сложных конструкций языка 1С
3. Реализация AI-агентов для автоматического расширения грамматики
4. Разработка системы тестирования и валидации

## Быстрый старт для разработки

1. Клонируйте репозиторий:
```bash
git clone <url-репозитория>
cd ast_create
```

2. Создайте и активируйте виртуальное окружение:
```bash
# Для Windows
python -m venv venv
venv\Scripts\activate

# Для Linux/Mac
python -m venv venv
source venv/bin/activate
```

3. Установите зависимости в режиме разработки:
```bash
pip install -e .
```

4. Для работы с AI-агентами убедитесь, что пакеты crewai и crewai-tools установлены в актуальной версии:
```bash
pip install --upgrade crewai crewai-tools
```

5. Запустите тесты:
```bash
pytest ast_create/tests/
```

6. Запустите приложение с примером кода 1С:
```bash
ast-create examples/example_1c_code.txt --debug
```

Для дальнейшей работы над проектом, обратитесь к файлу [checkpoints.md](checkpoints.md) для отслеживания прогресса и к [specification.md](specification.md) для детального описания требований по каждому этапу.

## Лицензия

MIT 